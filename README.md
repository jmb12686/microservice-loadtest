# LoadTest Microservice
This is a microservice, utilizing Wildfly Swarm and the Java Microprofile.   

#### Runtime Instructions
This application exposes a simple REST endpoint to execute a CPU intensive test.  This can be used for generating arbitrary CPU load.
Load is generated by multiplying a `BigInteger` N iterations.  

The API is `http://HOSTNAME:SWARM_PORT/loadtest-api/iterations/NUM_OF_ITERATIONS` 
 
#### Compile, Build, and Deployment Instructions
##### Compile and Execute
```bash
mvn wildfly-swarm:run
```
##### Create "fat" executable uberjar
```bash
mvn package
```
##### Run executable uberjar
```bash
java -jar loadtest-service-swarm.jar
```

##### Create hollow uberjar
Use this to decouple the wildfly container executable jar from the resulting war file.  This can allow layered containerization
```
mvn package -Dswarm.hollow=true
```
Alternatively, sonfigure the wildfly swarm plugin with `<hollow>true</hollow>` within the `pom.xml`

##### Run hollow uberjar and war
```bash
java -jar loadtest-service-hollow-swarm.jar loadtest-service.war
```
   